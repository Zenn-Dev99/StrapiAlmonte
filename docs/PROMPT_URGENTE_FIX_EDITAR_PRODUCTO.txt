â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸš¨ PROMPT URGENTE PARA INTRANET
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Fix: Cambios no se reflejan en WooCommerce al editar productos

## ğŸ”´ Problema
Cuando editas un producto desde la Intranet, sale que todo saliÃ³ bien
pero los cambios NO aparecen en WooCommerce.

## ğŸ¯ Causa
El API NO estÃ¡ enviando el campo `rawWooData` a Strapi cuando actualiza
un producto. Por eso Strapi usa datos viejos al sincronizar con WooCommerce.

## âœ… SoluciÃ³n (1 lÃ­nea de cÃ³digo)

### Archivo a modificar:
```
frontend-ubold/src/app/api/tienda/productos/[id]/route.ts
```

### Buscar esta secciÃ³n (aproximadamente lÃ­nea 150-170):

```typescript
const updateData: any = {
  data: {
    nombre_libro: body.nombre_libro,
    descripcion: convertirHTMLaBlocks(body.descripcion),
    subtitulo_libro: body.subtitulo_libro,
    isbn_libro: body.isbn_libro,
    precio: body.precio,
    precio_oferta: body.precio_oferta,
    stock_quantity: body.stock_quantity,
    portada_libro: portadaLibroId,
    canales: canalesIds,
    estado_publicacion: estadoFinal
  }
};
```

### Agregar UNA lÃ­nea:

```typescript
const updateData: any = {
  data: {
    nombre_libro: body.nombre_libro,
    descripcion: convertirHTMLaBlocks(body.descripcion),
    subtitulo_libro: body.subtitulo_libro,
    isbn_libro: body.isbn_libro,
    precio: body.precio,
    precio_oferta: body.precio_oferta,
    stock_quantity: body.stock_quantity,
    portada_libro: portadaLibroId,
    canales: canalesIds,
    estado_publicacion: estadoFinal,
    
    // âœ… AGREGAR ESTA LÃNEA:
    rawWooData: body.raw_woo_data || body.rawWooData || null
  }
};
```

## ğŸ§ª CÃ³mo probar

1. Hacer el cambio
2. Reiniciar el servidor frontend (si es necesario)
3. Editar un producto desde la Intranet (cambiar descripciÃ³n o precio)
4. Guardar
5. Ir a WooCommerce y verificar que el cambio aparezca

## ğŸ“ ExplicaciÃ³n tÃ©cnica (opcional)

El frontend construye `rawWooData` con todos los campos de WooCommerce
(description, short_description, price, stock, images, etc.).

Pero el API NO lo estaba enviando a Strapi, solo enviaba los campos
bÃ¡sicos de Strapi (descripcion, subtitulo_libro, precio, etc.).

Resultado: Strapi actualizaba sus campos, pero cuando sincronizaba
con WooCommerce, usaba el `rawWooData` viejo (o lo reconstruÃ­a 
incompleto), por eso los cambios no se reflejaban.

Con este fix, Strapi recibe el `rawWooData` actualizado y lo usa
al sincronizar con WooCommerce, por lo que todos los cambios
aparecen correctamente.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… FIN - Enviar este mensaje completo a Cursor (Intranet)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

