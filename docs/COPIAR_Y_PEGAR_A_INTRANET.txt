â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“¢ ACTUALIZACIÃ“N IMPORTANTE DE STRAPI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CAMBIOS IMPLEMENTADOS:

1. âœ… PRESERVACIÃ“N AUTOMÃTICA DE externalIds
   - Strapi ahora preserva automÃ¡ticamente los IDs de WooCommerce
   - YA NO necesitas incluir "externalIds" al actualizar productos
   - No se crearÃ¡n productos duplicados en WooCommerce

2. âœ… ACTUALIZACIÃ“N SIMPLIFICADA DE PRODUCTOS
   - Solo envÃ­a los campos que cambien
   - NO necesitas obtener el producto completo antes de actualizar
   - NO necesitas incluir externalIds en el payload

3. âœ… rawWooData SIGUE FUNCIONANDO
   - Sigue usando rawWooData para campos especÃ­ficos de WooCommerce
   - Funciona igual que antes, pero ahora no necesitas externalIds

4. âœ… MANEJO AUTOMÃTICO DE ERRORES DE IMAGEN
   - Si hay errores de permisos, Strapi reintenta sin imagen
   - El producto se crea/actualiza correctamente de todas formas

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NUEVO MÃ‰TODO PARA ACTUALIZAR PRODUCTOS (RECOMENDADO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

MÃ‰TODO SIMPLE (usa este):

const payload = {
  data: {
    nombre_libro: "TÃ­tulo Editado",
    precio: 59990,
    descripcion: "Nueva descripciÃ³n"
    // âœ… NO incluir externalIds
  }
};

await fetch(`https://strapi.moraleja.cl/api/libros/${productoId}`, {
  method: 'PUT',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(payload)
});

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MÃ‰TODO CON rawWooData (para campos avanzados):

const payload = {
  data: {
    nombre_libro: "TÃ­tulo Editado",
    rawWooData: {
      name: "TÃ­tulo Editado",
      description: "DescripciÃ³n HTML completa",
      short_description: "Resumen breve",
      regular_price: "59990.00",
      sale_price: "49990.00",
      weight: "0.8",
      dimensions: {
        length: "25",
        width: "18",
        height: "3"
      },
      shipping_class: "envio-rapido"
    }
    // âœ… NO incluir externalIds
  }
};

await fetch(`https://strapi.moraleja.cl/api/libros/${productoId}`, {
  method: 'PUT',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(payload)
});

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CREAR PRODUCTOS (sin cambios)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El mÃ©todo para CREAR sigue igual:

const payload = {
  data: {
    isbn_libro: "123456789",
    nombre_libro: "Nuevo Producto",
    precio: 49990,
    estado_publicacion: "Publicado",
    canales: [1, 2], // 1 = moraleja, 2 = escolar
    rawWooData: {
      // ... datos completos de WooCommerce
    }
  }
};

await fetch('https://strapi.moraleja.cl/api/libros', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify(payload)
});

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
RESUMEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES:
âŒ DebÃ­as obtener el producto completo antes de actualizar
âŒ DebÃ­as incluir externalIds en cada actualizaciÃ³n
âŒ Riesgo de crear productos duplicados

AHORA:
âœ… Solo envÃ­as los campos que cambien
âœ… NO necesitas incluir externalIds (se preservan automÃ¡ticamente)
âœ… Sin productos duplicados
âœ… MÃ¡s simple, mÃ¡s rÃ¡pido, mÃ¡s seguro

BENEFICIOS:
ğŸš€ Menos cÃ³digo
ğŸš€ Actualizaciones mÃ¡s rÃ¡pidas
ğŸš€ Sin errores de duplicados
ğŸš€ Manejo automÃ¡tico de errores de imagen

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

POR FAVOR, ACTUALIZA TU CÃ“DIGO DE EDICIÃ“N DE PRODUCTOS PARA USAR 
EL NUEVO MÃ‰TODO SIMPLIFICADO.

Ya no necesitas incluir externalIds al actualizar. Strapi los 
preserva automÃ¡ticamente.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

